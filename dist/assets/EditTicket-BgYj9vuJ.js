import{_ as k,c as _,a as e,d as h,g as p,r as v,t as a,i,w as y,e as g,v as f,h as b,o as V}from"./index-C2DzRLYs.js";const T={data(){return{ticket:{},maVe:this.$route.params.maVe}},methods:{formatTimeAgo(o){const t=new Date,l=new Date(o),c=t-l,s=Math.floor(c/(1e3*60*60)),n=Math.floor(c/(1e3*60*60*24));return n===0?s===0?"Vừa xong":`${s} giờ trước`:n===1?"1 ngày trước":`${n} ngày trước`},async getTicket(o){try{const t=await b.get(`/ve/${o}`);this.ticket=t.data,console.log(this.ticket)}catch(t){console.error("Error fetching ticket:",t)}},async editTicket(){try{(await b.put("/ve/",this.ticket)).status===200?(alert("Cập nhật vé thành công"),this.$router.push({name:"manager-ticket"})):alert("Cập nhật vé thất bại")}catch(o){console.error("Error updating ticket:",o)}}},computed:{tongTien(){return(this.ticket.giaVe*this.ticket.soLuong).toLocaleString("vi-VN")}},mounted(){this.getTicket(this.maVe)}},w={class:"container mt-2"},x={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},D={class:"breadcrumb"},L={class:"breadcrumb-item"},C={class:"breadcrumb-item"},N={class:"row d-flex justify-content-center align-items-center"},M={class:"col-6"},S={class:"card"},E={class:"card-body"},q={class:"card-title"},B={class:"text-success fw-bold"},A={class:"text-success fw-bold"},G={class:"row g-3 mb-2"},U={class:"col"},j={class:"col"},H={class:"mt-2"},K={class:"text-danger fw-bold fs-4"},Q={class:"mt-2"};function z(o,t,l,c,s,n){var u,m;const d=v("router-link");return V(),_("main",null,[e("section",null,[e("div",w,[e("nav",x,[e("ol",D,[e("li",L,[h(d,{to:{name:"admin"}},{default:p(()=>t[3]||(t[3]=[i("Quản lý")])),_:1})]),e("li",C,[h(d,{to:{name:"admin-user"}},{default:p(()=>t[4]||(t[4]=[i("Vé thuyết minh")])),_:1})]),t[5]||(t[5]=e("li",{class:"breadcrumb-item active","aria-current":"page"},"Chỉnh sửa",-1))])]),e("div",N,[e("div",M,[e("div",S,[e("div",E,[e("h4",q,"Chỉnh sửa vé "+a(s.ticket.maVe),1),e("p",null,[t[6]||(t[6]=i("Thuộc sở hữu của khu du lịch: ")),e("span",B,a((u=s.ticket.khuDuLich)==null?void 0:u.tenKhuDuLich),1)]),e("p",null,[t[7]||(t[7]=i("Được tạo bởi nhân viên: ")),e("span",A,a((m=s.ticket.nhanVien)==null?void 0:m.tenNhanVien),1)]),e("form",{onSubmit:t[2]||(t[2]=y((...r)=>n.editTicket&&n.editTicket(...r),["prevent"]))},[e("div",G,[e("div",U,[t[8]||(t[8]=e("label",{for:""},[i("Số lượng "),e("span",{class:"text-danger"},"*")],-1)),g(e("input",{class:"form-control",type:"number",id:"quantity","onUpdate:modelValue":t[0]||(t[0]=r=>s.ticket.soLuong=r),placeholder:"Số lượng",required:""},null,512),[[f,s.ticket.soLuong]])]),e("div",j,[t[9]||(t[9]=e("label",{for:""},[i("Giá vé "),e("span",{class:"text-danger"},"*")],-1)),g(e("input",{class:"form-control",type:"number",id:"total","onUpdate:modelValue":t[1]||(t[1]=r=>s.ticket.giaVe=r),placeholder:"Giá vé",required:""},null,512),[[f,s.ticket.giaVe]])])]),e("p",H,[t[10]||(t[10]=i("Tổng tiền: ")),e("span",K,a(n.tongTien+"đ"),1)]),e("p",Q,"Ngày tạo: "+a(this.formatTimeAgo(s.ticket.ngayTao)),1),t[11]||(t[11]=e("button",{class:"btn btn-success float-end mt-3",type:"submit"},"Lưu thông tin",-1))],32)])])])])])])])}const I=k(T,[["render",z]]);export{I as default};
