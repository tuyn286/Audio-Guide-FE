import{A as k}from"./AdminSideBar-CFQq7O3-.js";import{_ as v,c as i,a as t,d as c,g,r as m,w as h,e as x,v as y,j as T,b as w,F as P,k as C,n as p,t as l,h as r,o as d,i as b}from"./index-C2DzRLYs.js";const U={components:{AdminSideBar:k},data(){return{page:0,totalPages:0,users:[],searchText:"",role:""}},methods:{async getUser(){try{const a=await r.get("/tai-khoan/",{params:{page:this.page}});this.users=a.data.content,this.totalPages=a.data.page.totalPages}catch(a){console.error("Error fetching users:",a)}},search(){try{r.get("/tai-khoan/",{params:{page:this.page,searchText:this.searchText}}).then(a=>{this.users=a.data.content,this.totalPages=a.data.page.totalPages,console.log(a.data)})}catch(a){console.error("Error searching users:",a)}},filter(a){this.role=a;try{r.get("/tai-khoan/",{params:{page:this.page,role:this.role}}).then(e=>{this.users=e.data.content,this.totalPages=e.data.page.totalPages})}catch(e){console.error("Error filtering users:",e)}},prePage(){this.page--,this.searchText!==""?this.search():this.role!==""?this.filter(this.role):this.getUser()},nextPage(){this.page++,this.searchText!==""?this.search():this.role!==""?this.filter(this.role):this.getUser()},editUser(a){this.$router.push({name:"admin-edit-user",params:{maTaiKhoan:a}})},deleteUser(a){confirm("Bạn có chắc chắn muốn xóa tài khoản này không?")&&r.delete(`/tai-khoan/${a}`).then(()=>{alert("Xóa tài khoản thành công!"),this.getUser()}).catch(e=>{console.error("Error deleting user:",e),alert("Xóa tài khoản thất bại!")})}},mounted(){this.getUser()}},E={class:"container mt-2"},S={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},K={class:"breadcrumb"},N={class:"breadcrumb-item"},A={class:"row mt-3"},B={class:"col-3 border-end"},D={class:"col-9"},L={class:"row"},R={class:"col-2"},V={class:"col-4"},F={class:"dropdown"},M={class:"dropdown-menu"},O={class:"col-6"},Q={class:"d-flex"},X={class:"input-group mb-2"},j={class:"row"},q={class:"table align-middle mb-0 bg-white"},z=["onClick"],G=["onClick"],I={key:0,class:"text-danger p-4"},H={class:"row"},J={class:"row d-flex justify-content-end align-items-end mt-5"},W={class:"col-4"},Y={"aria-label":"Page navigation example"},Z={class:"pagination float-end"},$={class:"page-item"},tt={class:"page-link",href:"#"};function et(a,e,st,at,o,n){const u=m("router-link"),_=m("AdminSideBar");return d(),i("main",null,[t("div",E,[t("nav",S,[t("ol",K,[t("li",N,[c(u,{to:{name:"admin"}},{default:g(()=>e[8]||(e[8]=[b("Quản lý")])),_:1})]),e[9]||(e[9]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Tài khoản",-1))])]),t("div",A,[t("div",B,[c(_)]),t("div",D,[t("div",L,[t("div",R,[c(u,{class:"btn btn-success",to:{name:"admin-add-user"}},{default:g(()=>e[10]||(e[10]=[b("Thêm tài khoản")])),_:1})]),t("div",V,[t("div",F,[e[11]||(e[11]=t("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Lọc tài khoản ",-1)),t("ul",M,[t("li",null,[t("a",{class:"dropdown-item",onClick:e[0]||(e[0]=s=>n.filter("ROLE_MANAGER"))},"Quản lý")]),t("li",null,[t("a",{class:"dropdown-item",onClick:e[1]||(e[1]=s=>n.filter("ROLE_STAFF"))},"Nhân viên")]),t("li",null,[t("a",{class:"dropdown-item",onClick:e[2]||(e[2]=s=>n.filter("ROLE_USER"))},"Người dùng")])])])]),t("div",O,[t("div",Q,[t("form",{onSubmit:e[5]||(e[5]=h((...s)=>n.search&&n.search(...s),["prevent"])),class:"modal-content modal-body border-0 p-0"},[t("div",X,[x(t("input",{type:"text",class:"form-control",id:"inputModalSearch","onUpdate:modelValue":e[3]||(e[3]=s=>o.searchText=s),onKeyup:e[4]||(e[4]=T((...s)=>n.search&&n.search(...s),["enter"])),placeholder:"Tìm kiếm"},null,544),[[y,o.searchText]]),e[12]||(e[12]=t("button",{type:"submit",class:"input-group-text bg-success text-light"},[t("i",{class:"fa fa-fw fa-search text-white"})],-1))])],32)])])]),t("div",j,[t("table",q,[e[13]||(e[13]=t("thead",{class:"bg-light"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Tên tài khoản"),t("th",null,"SDT"),t("th",null,"Tên đăng nhập"),t("th",null,"Email"),t("th",null,"Quyền"),t("th"),t("th")])],-1)),t("tbody",null,[(d(!0),i(P,null,C(o.users,s=>(d(),i("tr",{key:s.maTaiKhoan},[t("td",null,l(s.maTaiKhoan),1),t("td",null,l(s.tenTaiKhoan),1),t("td",null,l(s.soDienThoai),1),t("td",null,l(s.tenDangNhap),1),t("td",null,l(s.email),1),t("td",null,l(s.quyen),1),t("td",null,[t("button",{type:"button",class:"btn btn-warning btn-sm btn-rounded",onClick:h(f=>n.editUser(s.maTaiKhoan),["prevent"])}," Sửa ",8,z)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm btn-rounded",onClick:h(f=>n.deleteUser(s.maTaiKhoan),["prevent"])}," Xóa ",8,G)])]))),128))])]),this.users.length===0?(d(),i("h4",I,"Không tìm thấy kết quả!")):w("",!0)]),t("div",H,[t("div",J,[t("div",W,[t("nav",Y,[t("ul",Z,[t("li",{class:p(["page-item",{disabled:o.page==0}])},[t("button",{onClick:e[6]||(e[6]=(...s)=>n.prePage&&n.prePage(...s)),class:"page-link"},"Trước")],2),t("li",$,[t("a",tt,l(o.page+1),1)]),t("li",{class:p(["page-item",{disabled:o.page>=o.totalPages-1}])},[t("button",{onClick:e[7]||(e[7]=(...s)=>n.nextPage&&n.nextPage(...s)),class:"page-link"},"Sau")],2)])])])])])])])])])}const lt=v(U,[["render",et]]);export{lt as default};
