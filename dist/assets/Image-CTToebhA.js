import{M as k}from"./ManagerSideBar-eQhEIkbG.js";import{_ as x,c as l,a as t,d,g as _,r as u,F as y,k as w,n as p,t as i,h as b,o as h,i as f}from"./index-C2DzRLYs.js";const I={components:{ManagerSideBar:k},data(){return{page:0,totalPages:0,images:[]}},methods:{formatTimeAgo(s){const e=new Date,r=new Date(s),c=e-r,o=Math.floor(c/(1e3*60*60)),a=Math.floor(c/(1e3*60*60*24));return a===0?o===0?"Vừa xong":`${o} giờ trước`:a<7?a===1?"1 ngày trước":`${a} ngày trước`:r.toLocaleDateString("vi-VN")},async getImages(){try{const s=await b.get("/hinh-anh/",{params:{page:this.page}});this.images=s.data.content.map(e=>({...e,ngayTaiLen:this.formatTimeAgo(e.ngayTaiLen)})),this.totalPages=s.data.page.totalPages}catch(s){console.error("Error fetching images:",s)}},nextPage(){this.page++,this.getImages()},prePage(){this.page--,this.getImages()},seeImg(s){this.$router.push({name:"manager-detail-image",params:{maHinhAnh:s}})},editImg(s){this.$router.push({name:"manager-edit-image",params:{maHinhAnh:s}})},deleteImg(s){confirm("Bạn có chắc chắn muốn xóa hình ảnh này không?")&&b.delete(`/hinh-anh/${s}`).then(()=>{alert("Xóa hình ảnh thành công!"),this.getImages()}).catch(e=>{console.error("Error deleting image:",e),alert("Xóa hình ảnh thất bại!")})}},created(){this.getImages()}},C={class:"container mt-2 mb-5"},P={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},T={class:"breadcrumb"},A={class:"breadcrumb-item"},B={class:"row mt-3"},M={class:"col-3 border-end"},S={class:"col-9"},D={class:"row mb-4"},H={class:"col-6"},L={class:"row"},V={class:"card"},N=["src"],X={class:"card-body"},E={class:"card-title"},F={class:"card-text"},j={class:"card-text text-muted"},z={class:"row"},Q={class:"col-4"},q=["onClick"],G={class:"col-4"},J=["onClick"],K={class:"col-4"},O=["onClick"],R={class:"row"},U={class:"row d-flex justify-content-end align-items-end mt-5"},W={class:"col-4"},Y={"aria-label":"Page navigation example"},Z={class:"pagination float-end"},$={class:"page-item"},tt={class:"page-link",href:"#"};function et(s,e,r,c,o,a){const g=u("router-link"),v=u("ManagerSideBar");return h(),l("main",null,[t("div",C,[t("nav",P,[t("ol",T,[t("li",A,[d(g,{to:{name:"manager"}},{default:_(()=>e[2]||(e[2]=[f("Quản lý")])),_:1})]),e[3]||(e[3]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Hình ảnh",-1))])]),t("div",B,[t("div",M,[d(v)]),t("div",S,[t("div",D,[t("div",H,[d(g,{class:"btn btn-success",to:{name:"manager-add-image"}},{default:_(()=>e[4]||(e[4]=[f("Thêm hình ảnh")])),_:1})]),e[5]||(e[5]=t("div",{class:"col-6"},null,-1))]),t("div",L,[(h(!0),l(y,null,w(o.images,n=>(h(),l("div",{class:"col-3",key:n.maHinhAnh},[t("div",V,[t("img",{src:n.duongDan,class:"card-img-top img-fluid",alt:"...",style:{height:"200px"}},null,8,N),t("div",X,[t("h5",E,i(n.loaiAnh),1),t("p",F,i(n.moTa),1),t("p",j,i(n.ngayTaiLen),1),t("div",z,[t("div",Q,[t("button",{class:"btn btn-primary",onClick:m=>a.seeImg(n.maHinhAnh)},"Xem",8,q)]),t("div",G,[t("button",{class:"btn btn-warning",onClick:m=>a.editImg(n.maHinhAnh)},"Sửa",8,J)]),t("div",K,[t("button",{class:"btn btn-danger",onClick:m=>a.deleteImg(n.maHinhAnh)},"Xóa",8,O)])])])])]))),128))]),t("div",R,[t("div",U,[t("div",W,[t("nav",Y,[t("ul",Z,[t("li",{class:p(["page-item",{disabled:o.page==0}])},[t("button",{onClick:e[0]||(e[0]=(...n)=>a.prePage&&a.prePage(...n)),class:"page-link"},"Trước")],2),t("li",$,[t("a",tt,i(o.page+1),1)]),t("li",{class:p(["page-item",{disabled:o.page>=o.totalPages-1}])},[t("button",{onClick:e[1]||(e[1]=(...n)=>a.nextPage&&a.nextPage(...n)),class:"page-link"},"Sau")],2)])])])])])])])])])}const nt=x(I,[["render",et]]);export{nt as default};
