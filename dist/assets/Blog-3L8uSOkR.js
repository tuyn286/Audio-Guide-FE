import{A as B}from"./AdminSideBar-CFQq7O3-.js";import{_ as f,c as l,a as t,d as c,g as m,r as b,w as r,e as x,v as y,j as k,b as w,F as P,k as T,n as p,t as o,h as g,o as d,i as _}from"./index-C2DzRLYs.js";const C={components:{AdminSideBar:B},data(){return{page:0,totalPages:0,blogs:[],searchText:""}},methods:{async getBlog(){try{const a=await g.get("/bai-viet/",{params:{page:this.page}});this.blogs=a.data.content,this.totalPages=a.data.page.totalPages}catch(a){console.error("Error fetching blogs:",a)}},search(){try{g.get("/bai-viet/",{params:{page:this.page,text:this.searchText}}).then(a=>{this.blogs=a.data.content,this.totalPages=a.data.page.totalPages})}catch(a){console.error("Error searching blogs:",a)}},prePage(){this.page--,this.searchText!==""&&this.search(),this.getBlog()},nextPage(){this.page++,this.searchText!==""&&this.search(),this.getBlog()},editBlog(a){this.$router.push({name:"manager-edit-blog",params:{maBaiViet:a}})},deleteBlog(a){confirm("Bạn có chắc chắn muốn xóa bài viết này không?")&&g.delete(`/bai-viet/${a}`).then(()=>{this.getBlog()})},seeBlog(a){this.$router.push({name:"manager-detail-blog",params:{maBaiViet:a}})}},mounted(){this.getBlog()}},V={class:"container mt-2"},D={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},S={class:"breadcrumb"},N={class:"breadcrumb-item"},A={class:"row mt-3"},E={class:"col-3 border-end"},K={class:"col-9"},M={class:"row"},Y={class:"col-6"},j={class:"col-6"},F={class:"d-flex"},I={class:"input-group mb-2"},X={class:"row"},q={class:"table align-middle mb-0 bg-white"},z=["onClick"],L=["onClick"],Q=["onClick"],U={key:0,class:"text-danger p-4"},G={class:"row"},H={class:"row d-flex justify-content-end align-items-end mt-5"},J={class:"col-4"},O={"aria-label":"Page navigation example"},R={class:"pagination float-end"},W={class:"page-item"},Z={class:"page-link",href:"#"};function $(a,e,tt,et,i,n){const u=b("router-link"),v=b("AdminSideBar");return d(),l("main",null,[t("div",V,[t("nav",D,[t("ol",S,[t("li",N,[c(u,{to:{name:"admin"}},{default:m(()=>e[5]||(e[5]=[_("Quản lý")])),_:1})]),e[6]||(e[6]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Bài viết",-1))])]),t("div",A,[t("div",E,[c(v)]),t("div",K,[t("div",M,[t("div",Y,[c(u,{class:"btn btn-success",to:{name:"manager-add-blog"}},{default:m(()=>e[7]||(e[7]=[_("Thêm bài viết")])),_:1})]),t("div",j,[t("div",F,[t("form",{onSubmit:e[2]||(e[2]=r((...s)=>n.search&&n.search(...s),["prevent"])),class:"modal-content modal-body border-0 p-0"},[t("div",I,[x(t("input",{type:"text",class:"form-control",id:"inputModalSearch","onUpdate:modelValue":e[0]||(e[0]=s=>i.searchText=s),onKeyup:e[1]||(e[1]=k((...s)=>n.search&&n.search(...s),["enter"])),placeholder:"Tìm kiếm"},null,544),[[y,i.searchText]]),e[8]||(e[8]=t("button",{type:"submit",class:"input-group-text bg-success text-light"},[t("i",{class:"fa fa-fw fa-search text-white"})],-1))])],32)])])]),t("div",X,[t("table",q,[e[9]||(e[9]=t("thead",{class:"bg-light"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Tiêu đề"),t("th",null,"Nội dung"),t("th",null,"ID Youtube"),t("th",null,"Ngày tạo"),t("th"),t("th"),t("th")])],-1)),t("tbody",null,[(d(!0),l(P,null,T(i.blogs,s=>(d(),l("tr",{key:s.maBaiViet},[t("td",null,o(s.maBaiViet),1),t("td",null,o(s.tieuDe),1),t("td",null,o(s.noiDung.substring(0,20)+"..."),1),t("td",null,o(s.duongDanYoutube.substring(30,s.duongDanYoutube.length)),1),t("td",null,o(s.ngayTao.substring(0,10)),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:r(h=>n.seeBlog(s.maBaiViet),["prevent"])}," Xem ",8,z)]),t("td",null,[t("button",{type:"button",class:"btn btn-warning btn-sm btn-rounded",onClick:r(h=>n.editBlog(s.maBaiViet),["prevent"])}," Sửa ",8,L)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm btn-rounded",onClick:r(h=>n.deleteBlog(s.maBaiViet),["prevent"])}," Xóa ",8,Q)])]))),128))])]),this.blogs.length===0?(d(),l("h4",U,"Không tìm thấy kết quả!")):w("",!0)]),t("div",G,[t("div",H,[t("div",J,[t("nav",O,[t("ul",R,[t("li",{class:p(["page-item",{disabled:i.page==0}])},[t("button",{onClick:e[3]||(e[3]=(...s)=>n.prePage&&n.prePage(...s)),class:"page-link"},"Trước")],2),t("li",W,[t("a",Z,o(i.page+1),1)]),t("li",{class:p(["page-item",{disabled:i.page>=i.totalPages-1}])},[t("button",{onClick:e[4]||(e[4]=(...s)=>n.nextPage&&n.nextPage(...s)),class:"page-link"},"Sau")],2)])])])])])])])])])}const nt=f(C,[["render",$]]);export{nt as default};
