import{A as _}from"./AdminSideBar-CFQq7O3-.js";import{_ as v,c as r,a as t,d as u,g as f,r as g,w as l,e as x,v as k,j as y,b as w,F as R,k as B,n as m,t as i,h as c,o as d,i as C}from"./index-C2DzRLYs.js";const P={components:{AdminSideBar:_},data(){return{page:0,totalPages:0,records:[],searchText:""}},methods:{async getRecord(){try{const n=await c.get("/ban-ghi/",{params:{page:this.page}});this.records=n.data.content,this.totalPages=n.data.page.totalPages}catch(n){console.error("Error fetching records:",n)}},search(){try{c.get("/ban-ghi/",{params:{page:this.page,text:this.searchText}}).then(n=>{this.records=n.data.content,this.totalPages=n.data.page.totalPages})}catch(n){console.error("Error searching records:",n)}},prePage(){this.page--,this.searchText!==""&&this.search(),this.getRecord()},nextPage(){this.page++,this.searchText!==""&&this.search(),this.getRecord()},editRecord(n){this.$router.push({name:"admin-edit-record",params:{maBanGhi:n}})},deleteRecord(n){confirm("Bạn có chắc chắn muốn xóa bản ghi này không?")&&c.delete(`/ban-ghi/${n}`).then(()=>{this.getRecord()})},seeQR(n){window.open(n,"_blank")}},created(){this.getRecord()}},T={class:"container mt-2 mb-5"},S={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},D={class:"breadcrumb"},G={class:"breadcrumb-item"},K={class:"row mt-3"},L={class:"col-3 border-end"},Q={class:"col-9"},V={class:"row"},A={class:"col-6"},M={class:"d-flex"},N={class:"input-group mb-2"},E={class:"row"},j={class:"table align-middle mb-0 bg-white"},F=["onClick"],q=["onClick"],z=["onClick"],U={key:0,class:"text-danger p-4"},X={class:"row"},H={class:"row d-flex justify-content-end align-items-end mt-5"},I={class:"col-4"},J={"aria-label":"Page navigation example"},O={class:"pagination float-end"},W={class:"page-item"},Y={class:"page-link",href:"#"};function Z(n,e,$,tt,o,a){const b=g("router-link"),p=g("AdminSideBar");return d(),r("main",null,[t("div",T,[t("nav",S,[t("ol",D,[t("li",G,[u(b,{to:{name:"admin"}},{default:f(()=>e[5]||(e[5]=[C("Quản lý")])),_:1})]),e[6]||(e[6]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Bản ghi thuyết minh",-1))])]),t("div",K,[t("div",L,[u(p)]),t("div",Q,[t("div",V,[e[8]||(e[8]=t("div",{class:"col-6"},null,-1)),t("div",A,[t("div",M,[t("form",{onSubmit:e[2]||(e[2]=l((...s)=>a.search&&a.search(...s),["prevent"])),class:"modal-content modal-body border-0 p-0"},[t("div",N,[x(t("input",{type:"text",class:"form-control",id:"inputModalSearch","onUpdate:modelValue":e[0]||(e[0]=s=>o.searchText=s),onKeyup:e[1]||(e[1]=y((...s)=>a.search&&a.search(...s),["enter"])),placeholder:"Tìm kiếm"},null,544),[[k,o.searchText]]),e[7]||(e[7]=t("button",{type:"submit",class:"input-group-text bg-success text-light"},[t("i",{class:"fa fa-fw fa-search text-white"})],-1))])],32)])])]),t("div",E,[t("table",j,[e[9]||(e[9]=t("thead",{class:"bg-light"},[t("tr",null,[t("th",null,"Mã bản ghi"),t("th",null,"Khu du lịch"),t("th",null,"Tên bản ghi"),t("th",null,"SL truy cập"),t("th"),t("th"),t("th")])],-1)),t("tbody",null,[(d(!0),r(R,null,B(o.records,s=>(d(),r("tr",{key:s.maBanGhi},[t("td",null,i(s.maBanGhi),1),t("td",null,i(s.khuDuLich.tenKhuDuLich),1),t("td",null,i(s.tenBanGhi),1),t("td",null,i(s.soLuongTruyCap),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:l(h=>a.seeQR(s.maQR.duongDan),["prevent"])}," QR ",8,F)]),t("td",null,[t("button",{type:"button",class:"btn btn-warning btn-sm btn-rounded",onClick:l(h=>a.editRecord(s.maBanGhi),["prevent"])}," Sửa ",8,q)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm btn-rounded",onClick:l(h=>a.deleteRecord(s.maBanGhi),["prevent"])}," Xóa ",8,z)])]))),128))])]),this.records.length===0?(d(),r("h4",U,"Không tìm thấy kết quả!")):w("",!0)]),t("div",X,[t("div",H,[t("div",I,[t("nav",J,[t("ul",O,[t("li",{class:m(["page-item",{disabled:o.page==0}])},[t("button",{onClick:e[3]||(e[3]=(...s)=>a.prePage&&a.prePage(...s)),class:"page-link"},"Trước")],2),t("li",W,[t("a",Y,i(o.page+1),1)]),t("li",{class:m(["page-item",{disabled:o.page>=o.totalPages-1}])},[t("button",{onClick:e[4]||(e[4]=(...s)=>a.nextPage&&a.nextPage(...s)),class:"page-link"},"Sau")],2)])])])])])])])])])}const nt=v(P,[["render",Z]]);export{nt as default};
