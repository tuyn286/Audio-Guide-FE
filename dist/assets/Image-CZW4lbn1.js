import{A as v}from"./AdminSideBar-CFQq7O3-.js";import{_ as k,c as l,a as t,d as m,g as x,r as _,F as y,k as w,n as u,t as o,h as p,o as d,i as I}from"./index-C2DzRLYs.js";const A={components:{AdminSideBar:v},data(){return{page:0,totalPages:0,images:[]}},methods:{async getImages(){try{const s=await p.get("/hinh-anh/",{params:{page:this.page}});this.images=s.data.content.map(e=>({...e,ngayTaiLen:this.formatTimeAgo(e.ngayTaiLen)})),this.totalPages=s.data.page.totalPages}catch(s){console.error("Error fetching images:",s)}},nextPage(){this.page++,this.getImages()},prePage(){this.page--,this.getImages()},seeImg(s){this.$router.push({name:"admin-detail-image",params:{maHinhAnh:s}})},editImg(s){this.$router.push({name:"admin-edit-image",params:{maHinhAnh:s}})},deleteImg(s){confirm("Bạn có chắc chắn muốn xóa hình ảnh này không?")&&p.delete(`/hinh-anh/${s}`).then(()=>{alert("Xóa hình ảnh thành công!"),this.getImages()}).catch(e=>{console.error("Error deleting image:",e),alert("Xóa hình ảnh thất bại!")})},formatTimeAgo(s){const e=new Date,c=new Date(s),r=e-c,i=Math.floor(r/(1e3*60*60)),a=Math.floor(r/(1e3*60*60*24));return a===0?i===0?"Vừa xong":`${i} giờ trước`:a<7?a===1?"1 ngày trước":`${a} ngày trước`:c.toLocaleDateString("vi-VN")}},created(){this.getImages()}},C={class:"container mt-2"},P={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},D={class:"breadcrumb"},B={class:"breadcrumb-item"},L={class:"row mt-3"},S={class:"col-3 border-end"},T={class:"col-9"},H={class:"row"},V={class:"card"},N=["src"],X={class:"card-body"},E={class:"card-title",style:{"min-height":"50px"}},M={class:"card-text"},F={class:"card-text text-muted"},j={class:"row"},z={class:"col-4"},K=["onClick"],Q={class:"col-4"},q=["onClick"],G={class:"col-4"},J=["onClick"],O={class:"row"},R={class:"row d-flex justify-content-end align-items-end mt-5"},U={class:"col-4"},W={"aria-label":"Page navigation example"},Y={class:"pagination float-end"},Z={class:"page-item"},$={class:"page-link",href:"#"};function tt(s,e,c,r,i,a){const b=_("router-link"),f=_("AdminSideBar");return d(),l("main",null,[t("div",C,[t("nav",P,[t("ol",D,[t("li",B,[m(b,{to:{name:"admin"}},{default:x(()=>e[2]||(e[2]=[I("Quản lý")])),_:1})]),e[3]||(e[3]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Hình ảnh",-1))])]),t("div",L,[t("div",S,[m(f)]),t("div",T,[e[4]||(e[4]=t("div",{class:"row mb-4"},[t("div",{class:"col-6"}),t("div",{class:"col-6"})],-1)),t("div",H,[(d(!0),l(y,null,w(i.images,n=>{var h;return d(),l("div",{class:"col-3",key:n.maHinhAnh},[t("div",V,[t("img",{src:n.duongDan,class:"card-img-top img-fluid",alt:"...",style:{height:"200px"}},null,8,N),t("div",X,[t("h5",E,o((h=n.khuDuLich)==null?void 0:h.tenKhuDuLich),1),t("p",M,o(n.loaiAnh),1),t("p",F,o(n.ngayTaiLen),1),t("div",j,[t("div",z,[t("button",{class:"btn btn-primary",onClick:g=>a.seeImg(n.maHinhAnh)},"Xem",8,K)]),t("div",Q,[t("button",{class:"btn btn-warning",onClick:g=>a.editImg(n.maHinhAnh)},"Sửa",8,q)]),t("div",G,[t("button",{class:"btn btn-danger",onClick:g=>a.deleteImg(n.maHinhAnh)},"Xóa",8,J)])])])])])}),128))]),t("div",O,[t("div",R,[t("div",U,[t("nav",W,[t("ul",Y,[t("li",{class:u(["page-item",{disabled:i.page==0}])},[t("button",{onClick:e[0]||(e[0]=(...n)=>a.prePage&&a.prePage(...n)),class:"page-link"},"Trước")],2),t("li",Z,[t("a",$,o(i.page+1),1)]),t("li",{class:u(["page-item",{disabled:i.page>=i.totalPages-1}])},[t("button",{onClick:e[1]||(e[1]=(...n)=>a.nextPage&&a.nextPage(...n)),class:"page-link"},"Sau")],2)])])])])])])])])])}const at=k(A,[["render",tt]]);export{at as default};
