import{M as v}from"./ManagerSideBar-eQhEIkbG.js";import{_ as f,c,a as t,d as u,g as x,r as m,w as i,e as y,v as k,j as w,F as R,k as B,n as b,t as r,h as l,o as h,i as T}from"./index-C2DzRLYs.js";const C={components:{ManagerSideBar:v},data(){return{page:0,totalPages:0,records:[],searchText:""}},methods:{async getRecord(){try{const a=await l.get("/ban-ghi/",{params:{page:this.page}});this.records=a.data.content,this.totalPages=a.data.page.totalPages}catch(a){console.error("Error fetching records:",a)}},search(){try{l.get("/ban-ghi/",{params:{page:this.page,text:this.searchText}}).then(a=>{this.records=a.data.content,this.totalPages=a.data.page.totalPages})}catch(a){console.error("Error searching records:",a)}},prePage(){this.page--,this.searchText!==""&&this.search(),this.getRecord()},nextPage(){this.page++,this.searchText!==""&&this.search(),this.getRecord()},editRecord(a){this.$router.push({name:"manager-edit-record",params:{maBanGhi:a}})},deleteRecord(a){confirm("Bạn có chắc chắn muốn xóa bản ghi này không?")&&l.delete(`/ban-ghi/${a}`).then(()=>{this.getRecord()})},redirectAddRecord(){this.$router.push({name:"manager-add-record"})},async seeQR(a){try{const d=(await l.get(`/ban-ghi/ma-qr/${a}`)).data;console.log(d),window.open(d,"_blank")}catch(e){console.log("Khong the mo ma qr:"+e)}}},mounted(){this.getRecord()}},P={class:"container mt-2 mb-5"},M={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},S={class:"breadcrumb"},G={class:"breadcrumb-item"},Q={class:"row mt-3"},V={class:"col-3 border-end"},A={class:"col-9"},E={class:"row"},K={class:"col-6"},L={class:"col-6"},N={class:"d-flex"},j={class:"input-group mb-2"},q={class:"row"},D={class:"table align-middle mb-0 bg-white"},F=["onClick"],z=["onClick"],U=["onClick"],X={class:"row"},H={class:"row d-flex justify-content-end align-items-end mt-5"},I={class:"col-4"},J={"aria-label":"Page navigation example"},O={class:"pagination float-end"},W={class:"page-item"},Y={class:"page-link",href:"#"};function Z(a,e,d,$,o,n){const p=m("router-link"),_=m("ManagerSideBar");return h(),c("main",null,[t("div",P,[t("nav",M,[t("ol",S,[t("li",G,[u(p,{to:{name:"manager"}},{default:x(()=>e[6]||(e[6]=[T("Quản lý")])),_:1})]),e[7]||(e[7]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Bản ghi thuyết minh",-1))])]),t("div",Q,[t("div",V,[u(_)]),t("div",A,[t("div",E,[t("div",K,[t("button",{class:"btn btn-success",onClick:e[0]||(e[0]=(...s)=>n.redirectAddRecord&&n.redirectAddRecord(...s))},"Thêm bản ghi")]),t("div",L,[t("div",N,[t("form",{onSubmit:e[3]||(e[3]=i((...s)=>n.search&&n.search(...s),["prevent"])),class:"modal-content modal-body border-0 p-0"},[t("div",j,[y(t("input",{type:"text",class:"form-control",id:"inputModalSearch","onUpdate:modelValue":e[1]||(e[1]=s=>o.searchText=s),onKeyup:e[2]||(e[2]=w((...s)=>n.search&&n.search(...s),["enter"])),placeholder:"Tìm kiếm"},null,544),[[k,o.searchText]]),e[8]||(e[8]=t("button",{type:"submit",class:"input-group-text bg-success text-light"},[t("i",{class:"fa fa-fw fa-search text-white"})],-1))])],32)])])]),t("div",q,[t("table",D,[e[9]||(e[9]=t("thead",{class:"bg-light"},[t("tr",null,[t("th",null,"Mã bản ghi"),t("th",null,"Tên bản ghi"),t("th",null,"Mô tả"),t("th",null,"SL truy cập"),t("th"),t("th"),t("th")])],-1)),t("tbody",null,[(h(!0),c(R,null,B(o.records,s=>(h(),c("tr",{key:s.maBanGhi},[t("td",null,r(s.maBanGhi),1),t("td",null,r(s.tenBanGhi),1),t("td",null,r(s.moTa.substring(0,50)+"..."),1),t("td",null,r(s.soLuongTruyCap),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:i(g=>n.seeQR(s.maBanGhi),["prevent"])}," QR ",8,F)]),t("td",null,[t("button",{type:"button",class:"btn btn-warning btn-sm btn-rounded",onClick:i(g=>n.editRecord(s.maBanGhi),["prevent"])}," Sửa ",8,z)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm btn-rounded",onClick:i(g=>n.deleteRecord(s.maBanGhi),["prevent"])}," Xóa ",8,U)])]))),128))])])]),t("div",X,[t("div",H,[t("div",I,[t("nav",J,[t("ul",O,[t("li",{class:b(["page-item",{disabled:o.page==0}])},[t("button",{onClick:e[4]||(e[4]=(...s)=>n.prePage&&n.prePage(...s)),class:"page-link"},"Trước")],2),t("li",W,[t("a",Y,r(o.page+1),1)]),t("li",{class:b(["page-item",{disabled:o.page>=o.totalPages-1}])},[t("button",{onClick:e[5]||(e[5]=(...s)=>n.nextPage&&n.nextPage(...s)),class:"page-link"},"Sau")],2)])])])])])])])])])}const st=f(C,[["render",Z]]);export{st as default};
