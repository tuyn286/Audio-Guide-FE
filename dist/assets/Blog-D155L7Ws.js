import{M as B}from"./ManagerSideBar-eQhEIkbG.js";import{_ as x,c,a as t,d as g,g as p,r as _,w as r,e as T,v as k,j as w,F as P,k as V,n as f,t as i,h as u,o as h,i as v}from"./index-C2DzRLYs.js";const D={components:{ManagerSideBar:B},data(){return{page:0,totalPages:0,blogs:[],searchText:""}},methods:{formatTimeAgo(a){const e=new Date,l=new Date(a),d=e-l,o=Math.floor(d/(1e3*60*60)),n=Math.floor(d/(1e3*60*60*24));return n===0?o===0?"Vừa xong":`${o} giờ trước`:n<7?n===1?"1 ngày trước":`${n} ngày trước`:l.toLocaleDateString("vi-VN")},async getBlog(){try{const a=await u.get("/bai-viet/quan-ly",{params:{page:this.page}});this.blogs=a.data.content.map(e=>({...e,ngayTao:this.formatTimeAgo(e.ngayTao)})),this.totalPages=a.data.page.totalPages}catch(a){console.error("Error fetching blogs:",a)}},search(){try{u.get("/bai-viet/quan-ly",{params:{page:this.page,text:this.searchText}}).then(a=>{this.blogs=a.data.content.map(e=>({...e,ngayTao:this.formatTimeAgo(e.ngayTao)})),this.totalPages=a.data.page.totalPages})}catch(a){console.error("Error searching blogs:",a)}},prePage(){this.page--,this.searchText!==""&&this.search(),this.getBlog()},nextPage(){this.page++,this.searchText!==""&&this.search(),this.getBlog()},editBlog(a){this.$router.push({name:"manager-edit-blog",params:{maBaiViet:a}})},deleteBlog(a){confirm("Bạn có chắc chắn muốn xóa bài viết này không?")&&u.delete(`/bai-viet/${a}`).then(()=>{this.getBlog()})},seeBlog(a){this.$router.push({name:"manager-detail-blog",params:{maBaiViet:a}})}},created(){this.getBlog()}},C={class:"container mt-2 mb-5"},M={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"ps-1 pt-1"},S={class:"breadcrumb"},N={class:"breadcrumb-item"},A={class:"row mt-3"},E={class:"col-3 border-end"},Y={class:"col-9"},j={class:"row"},q={class:"col-6"},F={class:"col-6"},I={class:"d-flex"},K={class:"input-group mb-2"},L={class:"row"},X={class:"table align-middle mb-0 bg-white"},z=["onClick"],H=["onClick"],Q=["onClick"],U={class:"row"},G={class:"row d-flex justify-content-end align-items-end mt-5"},J={class:"col-4"},O={"aria-label":"Page navigation example"},R={class:"pagination float-end"},W={class:"page-item"},Z={class:"page-link",href:"#"};function $(a,e,l,d,o,n){const m=_("router-link"),y=_("ManagerSideBar");return h(),c("main",null,[t("div",C,[t("nav",M,[t("ol",S,[t("li",N,[g(m,{to:{name:"manager"}},{default:p(()=>e[5]||(e[5]=[v("Quản lý")])),_:1})]),e[6]||(e[6]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Bài viết",-1))])]),t("div",A,[t("div",E,[g(y)]),t("div",Y,[t("div",j,[t("div",q,[g(m,{class:"btn btn-success",to:{name:"manager-add-blog"}},{default:p(()=>e[7]||(e[7]=[v("Thêm bài viết")])),_:1})]),t("div",F,[t("div",I,[t("form",{onSubmit:e[2]||(e[2]=r((...s)=>n.search&&n.search(...s),["prevent"])),class:"modal-content modal-body border-0 p-0"},[t("div",K,[T(t("input",{type:"text",class:"form-control",id:"inputModalSearch","onUpdate:modelValue":e[0]||(e[0]=s=>o.searchText=s),onKeyup:e[1]||(e[1]=w((...s)=>n.search&&n.search(...s),["enter"])),placeholder:"Tìm kiếm"},null,544),[[k,o.searchText]]),e[8]||(e[8]=t("button",{type:"submit",class:"input-group-text bg-success text-light"},[t("i",{class:"fa fa-fw fa-search text-white"})],-1))])],32)])])]),t("div",L,[t("table",X,[e[9]||(e[9]=t("thead",{class:"bg-light"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Tiêu đề"),t("th",null,"Nội dung"),t("th",null,"ID Youtube"),t("th",null,"Ngày tạo"),t("th"),t("th"),t("th")])],-1)),t("tbody",null,[(h(!0),c(P,null,V(o.blogs,s=>(h(),c("tr",{key:s.maBaiViet},[t("td",null,i(s.maBaiViet),1),t("td",null,i(s.tieuDe),1),t("td",null,i(s.noiDung.substring(0,50)),1),t("td",null,i(s.duongDanYoutube.substring(30,s.duongDanYoutube.length)),1),t("td",null,i(s.ngayTao),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:r(b=>n.seeBlog(s.maBaiViet),["prevent"])}," Xem ",8,z)]),t("td",null,[t("button",{type:"button",class:"btn btn-warning btn-sm btn-rounded",onClick:r(b=>n.editBlog(s.maBaiViet),["prevent"])}," Sửa ",8,H)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm btn-rounded",onClick:r(b=>n.deleteBlog(s.maBaiViet),["prevent"])}," Xóa ",8,Q)])]))),128))])])]),t("div",U,[t("div",G,[t("div",J,[t("nav",O,[t("ul",R,[t("li",{class:f(["page-item",{disabled:o.page==0}])},[t("button",{onClick:e[3]||(e[3]=(...s)=>n.prePage&&n.prePage(...s)),class:"page-link"},"Trước")],2),t("li",W,[t("a",Z,i(o.page+1),1)]),t("li",{class:f(["page-item",{disabled:o.page>=o.totalPages-1}])},[t("button",{onClick:e[4]||(e[4]=(...s)=>n.nextPage&&n.nextPage(...s)),class:"page-link"},"Sau")],2)])])])])])])])])])}const st=x(D,[["render",$]]);export{st as default};
